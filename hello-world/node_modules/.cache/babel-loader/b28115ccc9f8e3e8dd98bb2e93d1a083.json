{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\source\\\\repos\\\\Learning\\\\React\\\\hello-world\\\\src\\\\intergratePractice\\\\ProgressDIY.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProgressDIY extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      percent: 0 //這個值是還沒有接收到「外部」給的值。\n\n    };\n    this.increase = this.increase.bind(this);\n    this.decrease = this.decrease.bind(this);\n  }\n\n  increase() {\n    const percent = this.state.percent + 1;\n    this.setState({\n      percent\n    }, () => {\n      if (this.state.percent >= this.props.value) {\n        return; //下方的Recursive方法，只有在這個地方才可以跳出。\n      }\n\n      this.tm = setTimeout(this.increase, 20); // tm這個屬性，只是來操作setTimeout？\n      // 在setState之中，要實行一個方法，就只能這樣嗎？\n    });\n  }\n\n  decrease() {\n    const percent = this.state.percent - 1;\n    this.setState({\n      percent\n    }, () => {\n      if (this.state.percent <= this.props.value) {\n        return;\n      }\n\n      this.tmTwo = setTimeout(this.decrease, 20);\n    });\n  } // static getDerivedStateFromProps(props, state){\n  //     return {percent:props.value};\n  // } \n  // 建議改以 componentDidMount 來接收參數，原因是運行的順序︰\n  // 首次︰getDerivedStateFromProps > render > componentDidMount\n  // 再次︰getDerivedStateFromProps > render > componentDidUpdate\n  // componentDidMount 是只在 Mount 後做一次， getDerivedStateFromProps 和 componentDidUpdate 是每次都會做。\n  // 如果我們只是想收一次爸爸給的初始值，之後我們都自己來改的話，就放到componentDidMount\n  // 另一個讓我明白這個道理的例子︰\n  // https://dotblogs.com.tw/wasichris/2020/01/07/222653\n  // componentDidMount也只適合做開場動畫，因為它做了一次就不會重覆。\n\n\n  componentDidMount() {\n    this.setState({\n      percent: this.props.value\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.value > this.props.value) {\n      if (this.tm) clearTimeout(this.tm);\n      this.decrease();\n    } else if (prevProps.value < this.props.value) {\n      if (this.tmTwo) clearTimeout(this.tmTwo);\n      this.increase();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-back\",\n        style: {\n          backgroundColor: \"rgba(0,0,0,0.2)\",\n          width: \"200px\",\n          height: \"7px\",\n          borderRadius: \"10px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          style: {\n            backgroundColor: \"#fe5196\",\n            width: this.state.percent.toString() + \"%\",\n            height: \"100%\",\n            borderRadius: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), \"\\u76EE\\u524D\\u6BD4\\u7387: \", this.state.percent, \"%\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        value: 90,\n        onClick: this.props.onClick,\n        children: \"\\u589E\\u52A0\\u6BD4\\u7387\\u81F390\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        value: 10,\n        onClick: this.props.onClick,\n        children: \"\\u6E1B\\u5C11\\u6BD4\\u7387\\u81F310\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProgressDIY;","map":{"version":3,"names":["React","Component","ProgressDIY","constructor","props","state","percent","increase","bind","decrease","setState","value","tm","setTimeout","tmTwo","componentDidMount","componentDidUpdate","prevProps","prevState","clearTimeout","render","backgroundColor","width","height","borderRadius","toString","onClick"],"sources":["C:/Users/User/source/repos/Learning/React/hello-world/src/intergratePractice/ProgressDIY.js"],"sourcesContent":["import React, { Component } from 'react';\r\nclass ProgressDIY extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      percent: 0, //這個值是還沒有接收到「外部」給的值。\r\n    }\r\n    this.increase = this.increase.bind(this);\r\n    this.decrease = this.decrease.bind(this);\r\n  }\r\n\r\n  increase() {\r\n    const percent = this.state.percent + 1;\r\n    this.setState({ percent }, () => {\r\n      if (this.state.percent >= this.props.value) {\r\n        return; //下方的Recursive方法，只有在這個地方才可以跳出。\r\n      }\r\n      this.tm = setTimeout(this.increase, 20); // tm這個屬性，只是來操作setTimeout？\r\n      // 在setState之中，要實行一個方法，就只能這樣嗎？\r\n    });\r\n  }\r\n\r\n  decrease() {\r\n    const percent = this.state.percent - 1;\r\n    this.setState({ percent }, () => {\r\n      if (this.state.percent <= this.props.value) {\r\n        return;\r\n      }\r\n      this.tmTwo = setTimeout(this.decrease, 20);\r\n    });\r\n  }\r\n\r\n  // static getDerivedStateFromProps(props, state){\r\n  //     return {percent:props.value};\r\n  // } \r\n\r\n  // 建議改以 componentDidMount 來接收參數，原因是運行的順序︰\r\n  // 首次︰getDerivedStateFromProps > render > componentDidMount\r\n  // 再次︰getDerivedStateFromProps > render > componentDidUpdate\r\n  // componentDidMount 是只在 Mount 後做一次， getDerivedStateFromProps 和 componentDidUpdate 是每次都會做。\r\n  // 如果我們只是想收一次爸爸給的初始值，之後我們都自己來改的話，就放到componentDidMount\r\n\r\n  // 另一個讓我明白這個道理的例子︰\r\n  // https://dotblogs.com.tw/wasichris/2020/01/07/222653\r\n  // componentDidMount也只適合做開場動畫，因為它做了一次就不會重覆。\r\n  componentDidMount() {\r\n    this.setState({ percent: this.props.value })\r\n  }\r\n\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.value > this.props.value) {\r\n      if (this.tm)\r\n        clearTimeout(this.tm);\r\n      this.decrease();\r\n    }\r\n    else if (prevProps.value < this.props.value) {\r\n      if (this.tmTwo)\r\n        clearTimeout(this.tmTwo);\r\n      this.increase();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"progress-back\" style={{ backgroundColor: \"rgba(0,0,0,0.2)\", width: \"200px\", height: \"7px\", borderRadius: \"10px\" }}>\r\n          <div className=\"progress-bar\" style={{ backgroundColor: \"#fe5196\", width: this.state.percent.toString() + \"%\", height: \"100%\", borderRadius: \"10px\" }}></div>\r\n        </div>\r\n        目前比率: {this.state.percent}%\r\n        <br/>\r\n        <button value={90} onClick={this.props.onClick}>增加比率至90</button>\r\n        <br/>\r\n        <button value={10} onClick={this.props.onClick}>減少比率至10</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default ProgressDIY;"],"mappings":"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"},"metadata":{},"sourceType":"module"}