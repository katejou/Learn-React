{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react'; // 和 ProgressDIY_func 一樣 除了 return \n\nconst useRate = value => {\n  _s();\n\n  const [rate, setRate] = useState(0);\n  const mounted = useRef();\n  const tm = useRef();\n  const tmTwo = useRef(); // 這個useEffect，可以被許多 function component 共用\n\n  useEffect(() => {\n    if (!mounted.current) {\n      //componentDidMount\n      setRate(value);\n      mounted.current = true;\n    } else {\n      //componentDidUpdate\n      if (rate > value) {\n        if (tm.current) clearTimeout(tm.current);\n        tmTwo.current = setTimeout(() => {\n          setRate(rate - 1);\n        }, 20);\n      } else if (rate < value) {\n        if (tmTwo.current) clearTimeout(tmTwo.current);\n        tm.current = setTimeout(() => {\n          setRate(rate + 1);\n        }, 20);\n      }\n    }\n  }, [value, rate]);\n  return rate; // 這個自訂的方法，依賴輸入，再持續的﹑緩慢的﹑遞迴地輸出。\n};\n\n_s(useRate, \"JPbfAIvSgnW66AvgsdW/DyW/FbE=\");\n\nexport default useRate;","map":{"version":3,"names":["useState","useEffect","useRef","useRate","value","rate","setRate","mounted","tm","tmTwo","current","clearTimeout","setTimeout"],"sources":["C:/Users/User/source/repos/Learning/React/hello-world/src/CustomHook/CustomHook.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\n// 和 ProgressDIY_func 一樣 除了 return \r\nconst useRate = (value) => {\r\n\r\n    const [rate, setRate] = useState(0);\r\n    const mounted = useRef();\r\n    const tm = useRef();\r\n    const tmTwo = useRef();\r\n\r\n\r\n    // 這個useEffect，可以被許多 function component 共用\r\n    useEffect(() => {\r\n        if (!mounted.current) { //componentDidMount\r\n            setRate(value);\r\n            mounted.current = true;\r\n        }\r\n        else { //componentDidUpdate\r\n            if (rate > value) {\r\n                if (tm.current)\r\n                    clearTimeout(tm.current)\r\n                tmTwo.current = setTimeout(() => { setRate(rate - 1) }, 20);\r\n            }\r\n            else if (rate < value) {\r\n                if (tmTwo.current)\r\n                    clearTimeout(tmTwo.current)\r\n                tm.current = setTimeout(() => { setRate(rate + 1) }, 20);\r\n            }\r\n        }\r\n\r\n    }, [value, rate]);\r\n\r\n    return rate; \r\n    // 這個自訂的方法，依賴輸入，再持續的﹑緩慢的﹑遞迴地輸出。\r\n}\r\n\r\nexport default useRate;"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C,C,CAEA;;AACA,MAAMC,OAAO,GAAIC,KAAD,IAAW;EAAA;;EAEvB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAMO,OAAO,GAAGL,MAAM,EAAtB;EACA,MAAMM,EAAE,GAAGN,MAAM,EAAjB;EACA,MAAMO,KAAK,GAAGP,MAAM,EAApB,CALuB,CAQvB;;EACAD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACM,OAAO,CAACG,OAAb,EAAsB;MAAE;MACpBJ,OAAO,CAACF,KAAD,CAAP;MACAG,OAAO,CAACG,OAAR,GAAkB,IAAlB;IACH,CAHD,MAIK;MAAE;MACH,IAAIL,IAAI,GAAGD,KAAX,EAAkB;QACd,IAAII,EAAE,CAACE,OAAP,EACIC,YAAY,CAACH,EAAE,CAACE,OAAJ,CAAZ;QACJD,KAAK,CAACC,OAAN,GAAgBE,UAAU,CAAC,MAAM;UAAEN,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;QAAmB,CAA5B,EAA8B,EAA9B,CAA1B;MACH,CAJD,MAKK,IAAIA,IAAI,GAAGD,KAAX,EAAkB;QACnB,IAAIK,KAAK,CAACC,OAAV,EACIC,YAAY,CAACF,KAAK,CAACC,OAAP,CAAZ;QACJF,EAAE,CAACE,OAAH,GAAaE,UAAU,CAAC,MAAM;UAAEN,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;QAAmB,CAA5B,EAA8B,EAA9B,CAAvB;MACH;IACJ;EAEJ,CAlBQ,EAkBN,CAACD,KAAD,EAAQC,IAAR,CAlBM,CAAT;EAoBA,OAAOA,IAAP,CA7BuB,CA8BvB;AACH,CA/BD;;GAAMF,O;;AAiCN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}